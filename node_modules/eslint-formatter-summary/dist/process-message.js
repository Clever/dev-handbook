"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _findRule = _interopRequireDefault(require("./find-rule"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var processMessage = function processMessage(summary, message) {
  if (typeof message.ruleId === 'undefined') return summary;
  var ruleId = message.ruleId !== null ? message.ruleId : 'syntax error';
  var severity = message.severity;
  var errors = severity === 2 ? 1 : 0;
  var warnings = severity === 1 ? 1 : 0;
  var rule = (0, _findRule.default)(summary, ruleId);

  if (!rule) {
    summary.push({
      ruleId,
      errors,
      warnings
    });
  } else {
    rule.errors += errors;
    rule.warnings += warnings;
  }

  return summary;
};

var _default = processMessage;
exports.default = _default;
module.exports = exports.default;